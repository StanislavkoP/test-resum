!function(e){function t(){}function n(e,t){return function(){e.apply(t,arguments)}}function r(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function a(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void r._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void i(t.promise,e)}o(t.promise,r)}else(1===e._state?o:i)(t.promise,e._value)}))}function o(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var a=t.then;if(t instanceof r)return e._state=3,e._value=t,void s(e);if("function"==typeof a)return void u(n(a,t),e)}e._state=1,e._value=t,s(e)}catch(t){i(e,t)}}function i(e,t){e._state=2,e._value=t,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function u(e,t){var n=!1;try{e(function(e){n||(n=!0,o(t,e))},function(e){n||(n=!0,i(t,e))})}catch(e){if(n)return;n=!0,i(t,e)}}var c=setTimeout;r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,n){var r=new this.constructor(t);return a(this,new l(e,n,r)),r},r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,n){function r(o,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var s=i.then;if("function"==typeof s)return void s.call(i,function(e){r(o,e)},n)}t[o]=i,0==--a&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var a=t.length,o=0;o<t.length;o++)r(o,t[o])})},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){for(var r=0,a=e.length;r<a;r++)e[r].then(t,n)})},r._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){c(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},r._setImmediateFn=function(e){r._immediateFn=e},r._setUnhandledRejectionFn=function(e){r._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=r:e.Promise||(e.Promise=r)}(this),function(e,t,n){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=function(e,t){return n(e,t)}:n(e,t)}("undefined"!=typeof window?window.jQuery:{},"undefined"!=typeof window?window:this,function(e,t){"use strict";function n(e){var t,n=this;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}function r(){ve(this,r.baseDefaults)}function a(e){return"string"===pe(e)}function o(e){return!isNaN(fe(e))&&!isNaN(ge(e))}function i(e){return e&&e.getContext?e.getContext("2d"):null}function s(e){var t,n;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n=e[t],"string"===pe(n)&&o(n)&&"text"!==t&&(e[t]=ge(n)));void 0!==e.text&&(e.text=String(e.text))}function l(e){return e=ve({},e),e.masks=e.masks.slice(0),e}function u(e,t){var n;e.save(),n=l(t.transforms),t.savedTransforms.push(n)}function c(e,t){0===t.savedTransforms.length?t.transforms=l(Re):(e.restore(),t.transforms=t.savedTransforms.pop())}function d(e,t,n,r){n[r]&&(me(n[r])?t[r]=n[r].call(e,n):t[r]=n[r])}function h(e,t,n){d(e,t,n,"fillStyle"),d(e,t,n,"strokeStyle"),t.lineWidth=n.strokeWidth,n.rounded?t.lineCap=t.lineJoin="round":(t.lineCap=n.strokeCap,t.lineJoin=n.strokeJoin,t.miterLimit=n.miterLimit),n.strokeDash||(n.strokeDash=[]),t.setLineDash&&t.setLineDash(n.strokeDash),t.webkitLineDash=n.strokeDash,t.lineDashOffset=t.webkitLineDashOffset=t.mozDashOffset=n.strokeDashOffset,t.shadowOffsetX=n.shadowX,t.shadowOffsetY=n.shadowY,t.shadowBlur=n.shadowBlur,t.shadowColor=n.shadowColor,t.globalAlpha=n.opacity,t.globalCompositeOperation=n.compositing,n.imageSmoothing&&(t.imageSmoothingEnabled=t.mozImageSmoothingEnabled=n.imageSmoothingEnabled)}function f(e,t,n){n.mask&&(n.autosave&&u(e,t),e.clip(),t.transforms.masks.push(n._args))}function g(e,t){t._transformed&&e.restore()}function v(e,t,n){var r;n.closed&&t.closePath(),n.shadowStroke&&0!==n.strokeWidth?(t.stroke(),t.fill(),t.shadowColor="transparent",t.shadowBlur=0,t.stroke()):(t.fill(),"transparent"!==n.fillStyle&&(t.shadowColor="transparent"),0!==n.strokeWidth&&t.stroke()),n.closed||t.closePath(),g(t,n),n.mask&&(r=p(e),f(t,r,n))}function y(e,t,n,r,a){n._toRad=n.inDegrees?xe/180:1,n._transformed=!0,t.save(),n.fromCenter||n._centered||void 0===r||(void 0===a&&(a=r),n.x+=r/2,n.y+=a/2,n._centered=!0),n.rotate&&G(t,n,null),1===n.scale&&1===n.scaleX&&1===n.scaleY||B(t,n,null),(n.translate||n.translateX||n.translateY)&&N(t,n,null)}function p(t){var n,r=je.dataCache;return r._canvas===t&&r._data?n=r._data:((n=e.data(t,"jCanvas"))||(n={canvas:t,layers:[],layer:{names:{},groups:{}},eventHooks:{},intersecting:[],lastIntersected:null,cursor:e(t).css("cursor"),drag:{layer:null,dragging:!1},event:{type:null,x:null,y:null},events:{},transforms:l(Re),savedTransforms:[],animating:!1,animated:null,pixelRatio:1,scaled:!1},e.data(t,"jCanvas",n)),r._canvas=t,r._data=n),n}function m(e,t,n){var r;for(r in Ae.events)Object.prototype.hasOwnProperty.call(Ae.events,r)&&(n[r]||n.cursors&&n.cursors[r])&&w(e,t,n,r);t.events.mouseout||(e.bind("mouseout.jCanvas",function(){var n,r=t.drag.layer;for(r&&(t.drag={},R(e,t,r,"dragcancel")),n=0;n<t.layers.length;n+=1)(r=t.layers[n])._hovered&&e.triggerLayerEvent(t.layers[n],"mouseout");e.drawLayers()}),t.events.mouseout=!0)}function w(e,t,n,r){Ae.events[r](e,t),n._event=!0}function x(e,t,n){var r,a,o;if(n.draggable||n.cursors){for(r=["mousedown","mousemove","mouseup"],o=0;o<r.length;o+=1)a=r[o],w(e,t,n,a);n._event=!0}}function _(e,t,n,r){var o=t.layer.names;r?void 0!==r.name&&a(n.name)&&n.name!==r.name&&delete o[n.name]:r=n,a(r.name)&&(o[r.name]=n)}function b(e,t,n,r){var a,o,i,s,l,u=t.layer.groups;if(r){if(void 0!==r.groups&&null!==n.groups)for(i=0;i<n.groups.length;i+=1)if(o=n.groups[i],a=u[o]){for(l=0;l<a.length;l+=1)if(a[l]===n){s=l,a.splice(l,1);break}0===a.length&&delete u[o]}}else r=n;if(void 0!==r.groups&&null!==r.groups)for(i=0;i<r.groups.length;i+=1)o=r.groups[i],(a=u[o])||(a=u[o]=[],a.name=o),void 0===s&&(s=a.length),a.splice(s,0,n)}function C(e){var t,n,r;for(t=null,n=e.intersecting.length-1;n>=0;n-=1)if((t=e.intersecting[n])._masks){for(r=t._masks.length-1;r>=0;r-=1)if(!t._masks[r].intersects){t.intersects=!1;break}if(t.intersects&&!t.intangible)break}return t&&t.intangible&&(t=null),t}function k(e,t,n,r){n&&n.visible&&n._method&&(n._next=r||null,n._method&&n._method.call(e,n))}function L(e,t,n){var r,a,o,i,s,l,u,c,d,h;if(i=t.drag,a=i.layer,s=a&&a.dragGroups||[],r=t.layers,"mousemove"===n||"touchmove"===n){if(i.dragging||(i.dragging=!0,a.dragging=!0,a.bringToFront&&(r.splice(a.index,1),a.index=r.push(a)),a._startX=a.x,a._startY=a.y,a._endX=a._eventX,a._endY=a._eventY,R(e,t,a,"dragstart")),i.dragging)for(d=a._eventX-(a._endX-a._startX),h=a._eventY-(a._endY-a._startY),a.dx=d-a.x,a.dy=h-a.y,"y"!==a.restrictDragToAxis&&(a.x=d),"x"!==a.restrictDragToAxis&&(a.y=h),R(e,t,a,"drag"),c=0;c<s.length;c+=1)if(u=s[c],l=t.layer.groups[u],a.groups&&l)for(o=0;o<l.length;o+=1)l[o]!==a&&("y"!==a.restrictDragToAxis&&"y"!==l[o].restrictDragToAxis&&(l[o].x+=a.dx),"x"!==a.restrictDragToAxis&&"x"!==l[o].restrictDragToAxis&&(l[o].y+=a.dy))}else"mouseup"!==n&&"touchend"!==n||(i.dragging&&(a.dragging=!1,i.dragging=!1,R(e,t,a,"dragstop")),t.drag={})}function T(t,n,r){var a;n.cursors&&(a=n.cursors[r]),-1!==e.inArray(a,Oe.cursors)&&(a=Oe.prefix+a),a&&t.css({cursor:a})}function S(e,t){e.css({cursor:t.cursor})}function P(e,t,n,r,a){r[n]&&t._running&&!t._running[n]&&(t._running[n]=!0,r[n].call(e[0],t,a),t._running[n]=!1)}function j(t,n){return!(t.disableEvents||t.intangible&&-1!==e.inArray(n,Xe))}function R(e,t,n,r,a){j(n,r)&&("mouseout"!==r&&T(e,n,r),P(e,n,r,n,a),P(e,n,r,t.eventHooks,a),P(e,n,r,Ae.eventHooks,a))}function O(t,r,o,i){var l,u,c,d=r._layer?o:r;return r._args=o,(r.draggable||r.dragGroups)&&(r.layer=!0,r.draggable=!0),r._method||(i?r._method=i:r.method?r._method=e.fn[r.method]:r.type&&(r._method=e.fn[Pe.drawings[r.type]])),r.layer&&!r._layer?(l=e(t),u=p(t),c=u.layers,(null===d.name||a(d.name)&&void 0===u.layer.names[d.name])&&(s(r),d=new n(r),d.canvas=t,d.layer=!0,d._layer=!0,d._running={},null!==d.data?d.data=ve({},d.data):d.data={},null!==d.groups?d.groups=d.groups.slice(0):d.groups=[],_(l,u,d),b(l,u,d),m(l,u,d),x(l,u,d),r._event=d._event,d._method===e.fn.drawText&&l.measureText(d),null===d.index&&(d.index=c.length),c.splice(d.index,0,d),r._args=d,R(l,u,d,"add"))):r.layer||s(r),d}function X(e){var t,n;for(n=0;n<Oe.props.length;n+=1)t=Oe.props[n],e[t]=e["_"+t]}function A(e,t){var n,r;for(r=0;r<Oe.props.length;r+=1)n=Oe.props[r],void 0!==e[n]&&(e["_"+n]=e[n],Oe.propsObj[n]=!0,t&&delete e[n])}function Y(e,t,n){var r,a,o,i;for(r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&(a=n[r],me(a)&&(n[r]=a.call(e,t,r)),"object"===pe(a)&&we(a))){for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i=a[o],void 0!==t[r]&&(t[r+"."+o]=t[r][o],n[r+"."+o]=i));delete n[r]}return n}function D(e){var t;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&-1!==t.indexOf(".")&&delete e[t]}function z(t){var n,r,a=[],o=1;return"transparent"===t?t="rgba(0, 0, 0, 0)":t.match(/^([a-z]+|#[0-9a-f]+)$/gi)&&(r=le.head,n=r.style.color,r.style.color=t,t=e.css(r,"color"),r.style.color=n),t.match(/^rgb/gi)&&(a=t.match(/(\d+(\.\d+)?)/gi),t.match(/%/gi)&&(o=2.55),a[0]*=o,a[1]*=o,a[2]*=o,void 0!==a[3]?a[3]=ge(a[3]):a[3]=1),a}function E(e){var t,n=3;for("array"!==pe(e.start)&&(e.start=z(e.start),e.end=z(e.end)),e.now=[],1===e.start[3]&&1===e.end[3]||(n=4),t=0;t<n;t+=1)e.now[t]=e.start[t]+(e.end[t]-e.start[t])*e.pos,t<3&&(e.now[t]=_e(e.now[t]));1!==e.start[3]||1!==e.end[3]?e.now="rgba("+e.now.join(",")+")":(e.now.slice(0,3),e.now="rgb("+e.now.join(",")+")"),e.elem.nodeName?e.elem.style[e.prop]=e.now:e.elem[e.prop]=e.now}function F(e){return Pe.touchEvents[e]&&(e=Pe.touchEvents[e]),e}function W(e){return Pe.mouseEvents[e]&&(e=Pe.mouseEvents[e]),e}function H(e){Ae.events[e]=function(t,n){function r(e){i.x=e.offsetX,i.y=e.offsetY,i.type=a,i.event=e,t.drawLayers({resetFire:!0}),e.preventDefault()}var a,o,i;i=n.event,o=F(a="mouseover"===e||"mouseout"===e?"mousemove":e),n.events[a]||(o!==a?t.bind(a+".jCanvas "+o+".jCanvas",r):t.bind(a+".jCanvas",r),n.events[a]=!0)}}function I(e,t,n){var r,a,o,i,s,l,u,c;(r=n._args)&&(a=p(e),null!==(o=a.event).x&&null!==o.y&&(l=o.x*a.pixelRatio,u=o.y*a.pixelRatio,i=t.isPointInStroke&&!1===r.closed&&"transparent"===r.fillStyle?t.isPointInStroke(l,u):t.isPointInPath(l,u)||t.isPointInStroke&&t.isPointInStroke(l,u)),s=a.transforms,r.eventX=o.x,r.eventY=o.y,r.event=o.event,c=a.transforms.rotate,l=r.eventX,u=r.eventY,0!==c?(r._eventX=l*ke(-c)-u*Ce(-c),r._eventY=u*ke(-c)+l*Ce(-c)):(r._eventX=l,r._eventY=u),r._eventX/=s.scaleX,r._eventY/=s.scaleY,i&&a.intersecting.push(r),r.intersects=Boolean(i))}function G(e,t,n){t._toRad=t.inDegrees?xe/180:1,e.translate(t.x,t.y),e.rotate(t.rotate*t._toRad),e.translate(-t.x,-t.y),n&&(n.rotate+=t.rotate*t._toRad)}function B(e,t,n){1!==t.scale&&(t.scaleX=t.scaleY=t.scale),e.translate(t.x,t.y),e.scale(t.scaleX,t.scaleY),e.translate(-t.x,-t.y),n&&(n.scaleX*=t.scaleX,n.scaleY*=t.scaleY)}function N(e,t,n){t.translate&&(t.translateX=t.translateY=t.translate),e.translate(t.translateX,t.translateY),n&&(n.translateX+=t.translateX,n.translateY+=t.translateY)}function q(e){for(;e<0;)e+=2*xe;return e}function J(e,t){return e.x+e.radius*ke(t)}function Q(e,t){return e.y+e.radius*Ce(t)}function U(e,t,n,r){var a,o,i,s,l;n===r?(i=0,s=0):(i=n.x,s=n.y),r.inDegrees||360!==r.end||(r.end=2*xe),r.start*=n._toRad,r.end*=n._toRad,r.start-=xe/2,r.end-=xe/2,l=xe/180,r.ccw&&(l*=-1),M(e,t,n,r,J(r,r.start+l),Q(r,r.start+l),J(r,r.start),Q(r,r.start)),t.arc(r.x+i,r.y+s,r.radius,r.start,r.end,r.ccw),a=J(r,r.end+l),o=Q(r,r.end+l),V(e,t,n,r,J(r,r.end),Q(r,r.end),a,o)}function $(e,t,n,r,a,o,i,s){var l,u,c,d,h,f,g;r.arrowRadius&&!n.closed&&(g=Le(s-o,i-a),g-=xe,h=n.strokeWidth*ke(g),f=n.strokeWidth*Ce(g),l=i+r.arrowRadius*ke(g+r.arrowAngle/2),u=s+r.arrowRadius*Ce(g+r.arrowAngle/2),c=i+r.arrowRadius*ke(g-r.arrowAngle/2),d=s+r.arrowRadius*Ce(g-r.arrowAngle/2),t.moveTo(l-h,u-f),t.lineTo(i-h,s-f),t.lineTo(c-h,d-f),t.moveTo(i-h,s-f),t.lineTo(i+h,s+f),t.moveTo(i,s))}function M(e,t,n,r,a,o,i,s){r._arrowAngleConverted||(r.arrowAngle*=n._toRad,r._arrowAngleConverted=!0),r.startArrow&&$(e,t,n,r,a,o,i,s)}function V(e,t,n,r,a,o,i,s){r._arrowAngleConverted||(r.arrowAngle*=n._toRad,r._arrowAngleConverted=!0),r.endArrow&&$(e,t,n,r,a,o,i,s)}function K(e,t,n,r){var a,o,i;for(a=2,M(e,t,n,r,r.x2+n.x,r.y2+n.y,r.x1+n.x,r.y1+n.y),void 0!==r.x1&&void 0!==r.y1&&t.moveTo(r.x1+n.x,r.y1+n.y);o=r["x"+a],i=r["y"+a],void 0!==o&&void 0!==i;)t.lineTo(o+n.x,i+n.y),a+=1;V(e,t,n,r,r["x"+((a-=1)-1)]+n.x,r["y"+(a-1)]+n.y,r["x"+a]+n.x,r["y"+a]+n.y)}function Z(e,t,n,r){var a,o,i,s,l;for(a=2,M(e,t,n,r,r.cx1+n.x,r.cy1+n.y,r.x1+n.x,r.y1+n.y),void 0!==r.x1&&void 0!==r.y1&&t.moveTo(r.x1+n.x,r.y1+n.y);o=r["x"+a],i=r["y"+a],s=r["cx"+(a-1)],l=r["cy"+(a-1)],void 0!==o&&void 0!==i&&void 0!==s&&void 0!==l;)t.quadraticCurveTo(s+n.x,l+n.y,o+n.x,i+n.y),a+=1;V(e,t,n,r,r["cx"+((a-=1)-1)]+n.x,r["cy"+(a-1)]+n.y,r["x"+a]+n.x,r["y"+a]+n.y)}function ee(e,t,n,r){var a,o,i,s,l,u,c,d;for(a=2,o=1,M(e,t,n,r,r.cx1+n.x,r.cy1+n.y,r.x1+n.x,r.y1+n.y),void 0!==r.x1&&void 0!==r.y1&&t.moveTo(r.x1+n.x,r.y1+n.y);i=r["x"+a],s=r["y"+a],l=r["cx"+o],u=r["cy"+o],c=r["cx"+(o+1)],d=r["cy"+(o+1)],void 0!==i&&void 0!==s&&void 0!==l&&void 0!==u&&void 0!==c&&void 0!==d;)t.bezierCurveTo(l+n.x,u+n.y,c+n.x,d+n.y,i+n.x,s+n.y),a+=1,o+=2;a-=1,V(e,t,n,r,r["cx"+((o-=2)+1)]+n.x,r["cy"+(o+1)]+n.y,r["x"+a]+n.x,r["y"+a]+n.y)}function te(e,t,n){return t*=e._toRad,t-=xe/2,n*ke(t)}function ne(e,t,n){return t*=e._toRad,t-=xe/2,n*Ce(t)}function re(e,t,n,r){var a,o,i,s,l,u,c,d,h,f,g;for(n===r?(s=0,l=0):(s=n.x,l=n.y),a=1,u=d=f=r.x+s,c=h=g=r.y+l,M(e,t,n,r,u+te(n,r.a1,r.l1),c+ne(n,r.a1,r.l1),u,c),void 0!==r.x&&void 0!==r.y&&t.moveTo(u,c);o=r["a"+a],i=r["l"+a],void 0!==o&&void 0!==i;)d=f,h=g,f+=te(n,o,i),g+=ne(n,o,i),t.lineTo(f,g),a+=1;V(e,t,n,r,d,h,f,g)}function ae(e,t,n){isNaN(fe(n.fontSize))||(n.fontSize+="px"),t.font=n.fontStyle+" "+n.fontSize+" "+n.fontFamily}function oe(t,n,r,a){var o,i,s,l=je.propCache;if(l.text===r.text&&l.fontStyle===r.fontStyle&&l.fontSize===r.fontSize&&l.fontFamily===r.fontFamily&&l.maxWidth===r.maxWidth&&l.lineHeight===r.lineHeight)r.width=l.width,r.height=l.height;else{for(r.width=n.measureText(a[0]).width,s=1;s<a.length;s+=1)(i=n.measureText(a[s]).width)>r.width&&(r.width=i);o=t.style.fontSize,t.style.fontSize=r.fontSize,r.height=ge(e.css(t,"fontSize"))*a.length*r.lineHeight,t.style.fontSize=o}}function ie(e,t){var n,r,a,o,i,s,l=String(t.text),u=t.maxWidth,c=l.split("\n"),d=[];for(a=0;a<c.length;a+=1){if(o=c[a],i=o.split(" "),n=[],r="",1===i.length||e.measureText(o).width<u)n=[o];else{for(s=0;s<i.length;s+=1)e.measureText(r+i[s]).width>u&&(""!==r&&n.push(r),r=""),r+=i[s],s!==i.length-1&&(r+=" ");n.push(r)}d=d.concat(n.join("\n").replace(/((\n))|($)/gi,"$2").split("\n"))}return d}var se,le=t.document,ue=t.Image,ce=t.Array,de=t.getComputedStyle,he=t.Math,fe=t.Number,ge=t.parseFloat,ve=e.extend,ye=e.inArray,pe=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},me=e.isFunction,we=e.isPlainObject,xe=he.PI,_e=he.round,be=he.abs,Ce=he.sin,ke=he.cos,Le=he.atan2,Te=ce.prototype.slice,Se=e.event.fix,Pe={},je={dataCache:{},propCache:{},imageCache:{}},Re={rotate:0,scaleX:1,scaleY:1,translateX:0,translateY:0,masks:[]},Oe={},Xe=["mousedown","mousemove","mouseup","mouseover","mouseout","touchstart","touchmove","touchend"],Ae={events:{},eventHooks:{},future:{}};r.baseDefaults={align:"center",arrowAngle:90,arrowRadius:0,autosave:!0,baseline:"middle",bringToFront:!1,ccw:!1,closed:!1,compositing:"source-over",concavity:0,cornerRadius:0,count:1,cropFromCenter:!0,crossOrigin:null,cursors:null,disableEvents:!1,draggable:!1,dragGroups:null,groups:null,data:null,dx:null,dy:null,end:360,eventX:null,eventY:null,fillStyle:"transparent",fontStyle:"normal",fontSize:"12pt",fontFamily:"sans-serif",fromCenter:!0,height:null,imageSmoothing:!0,inDegrees:!0,intangible:!1,index:null,letterSpacing:null,lineHeight:1,layer:!1,mask:!1,maxWidth:null,miterLimit:10,name:null,opacity:1,r1:null,r2:null,radius:0,repeat:"repeat",respectAlign:!1,restrictDragToAxis:null,rotate:0,rounded:!1,scale:1,scaleX:1,scaleY:1,shadowBlur:0,shadowColor:"transparent",shadowStroke:!1,shadowX:0,shadowY:0,sHeight:null,sides:0,source:"",spread:0,start:0,strokeCap:"butt",strokeDash:null,strokeDashOffset:0,strokeJoin:"miter",strokeStyle:"transparent",strokeWidth:1,sWidth:null,sx:null,sy:null,text:"",translate:0,translateX:0,translateY:0,type:null,visible:!0,width:null,x:0,y:0},se=new r,n.prototype=se,Ae.extend=function(t){return t.name&&(t.props&&ve(se,t.props),e.fn[t.name]=function e(r){var a,o,s,l,u=this;for(o=0;o<u.length;o+=1)a=u[o],(s=i(a))&&(l=new n(r),O(a,l,r,e),h(a,s,l),t.fn.call(a,s,l));return u},t.type&&(Pe.drawings[t.type]=t.name)),e.fn[t.name]},e.fn.getEventHooks=function(){var e,t,n=this,r={};return 0!==n.length&&(e=n[0],t=p(e),r=t.eventHooks),r},e.fn.setEventHooks=function(e){var t,n,r=this;for(t=0;t<r.length;t+=1)n=p(r[t]),ve(n.eventHooks,e);return r},e.fn.getLayers=function(e){var t,n,r,a,o,i=this,s=[];if(0!==i.length)if(t=i[0],n=p(t),r=n.layers,me(e))for(o=0;o<r.length;o+=1)a=r[o],e.call(t,a)&&s.push(a);else s=r;return s},e.fn.getLayer=function(e){var t,n,r,o,i,s,l=this;if(0!==l.length)if(t=l[0],n=p(t),r=n.layers,s=pe(e),e&&e.layer)o=e;else if("number"===s)e<0&&(e=r.length+e),o=r[e];else if("regexp"===s){for(i=0;i<r.length;i+=1)if(a(r[i].name)&&r[i].name.match(e)){o=r[i];break}}else o=n.layer.names[e];return o},e.fn.getLayerGroup=function(e){var t,n,r,a,o,i=this,s=pe(e);if(0!==i.length)if(t=i[0],"array"===s)o=e;else if("regexp"===s){r=(n=p(t)).layer.groups;for(a in r)if(a.match(e)){o=r[a];break}}else n=p(t),o=n.layer.groups[e];return o},e.fn.getLayerIndex=function(e){var t=this,n=t.getLayers(),r=t.getLayer(e);return ye(r,n)},e.fn.setLayer=function(t,n){var r,a,i,l,u,c,d,h=this;for(a=0;a<h.length;a+=1)if(r=e(h[a]),i=p(h[a]),l=e(h[a]).getLayer(t)){_(r,i,l,n),b(r,i,l,n),s(n);for(u in n)Object.prototype.hasOwnProperty.call(n,u)&&(c=n[u],d=pe(c),"object"===d&&we(c)?(l[u]=ve({},c),s(l[u])):"array"===d?l[u]=c.slice(0):"string"===d?0===c.indexOf("+=")?l[u]+=ge(c.substr(2)):0===c.indexOf("-=")?l[u]-=ge(c.substr(2)):!isNaN(c)&&o(c)&&"text"!==u?l[u]=ge(c):l[u]=c:l[u]=c);m(r,i,l),x(r,i,l),!1===e.isEmptyObject(n)&&R(r,i,l,"change",n)}return h},e.fn.setLayers=function(t,n){var r,a,o,i,s=this;for(a=0;a<s.length;a+=1)for(r=e(s[a]),o=r.getLayers(n),i=0;i<o.length;i+=1)r.setLayer(o[i],t);return s},e.fn.setLayerGroup=function(t,n){var r,a,o,i,s=this;for(a=0;a<s.length;a+=1)if(r=e(s[a]),o=r.getLayerGroup(t))for(i=0;i<o.length;i+=1)r.setLayer(o[i],n);return s},e.fn.moveLayer=function(t,n){var r,a,o,i,s,l=this;for(a=0;a<l.length;a+=1)r=e(l[a]),o=p(l[a]),i=o.layers,(s=r.getLayer(t))&&(s.index=ye(s,i),i.splice(s.index,1),i.splice(n,0,s),n<0&&(n=i.length+n),s.index=n,R(r,o,s,"move"));return l},e.fn.removeLayer=function(t){var n,r,a,o,i,s=this;for(r=0;r<s.length;r+=1)n=e(s[r]),a=p(s[r]),o=n.getLayers(),(i=n.getLayer(t))&&(i.index=ye(i,o),o.splice(i.index,1),delete i._layer,_(n,a,i,{name:null}),b(n,a,i,{groups:null}),R(n,a,i,"remove"));return s},e.fn.removeLayers=function(t){var n,r,a,o,i,s,l=this;for(r=0;r<l.length;r+=1){for(n=e(l[r]),a=p(l[r]),o=n.getLayers(t),s=0;s<o.length;s+=1)i=o[s],n.removeLayer(i),s-=1;a.layer.names={},a.layer.groups={}}return l},e.fn.removeLayerGroup=function(t){var n,r,a,o,i=this;if(void 0!==t)for(r=0;r<i.length;r+=1)if(n=e(i[r]),a=n.getLayerGroup(t))for(a=a.slice(0),o=0;o<a.length;o+=1)n.removeLayer(a[o]);return i},e.fn.addLayerToGroup=function(t,n){var r,a,o,i=this,s=[n];for(a=0;a<i.length;a+=1)r=e(i[a]),(o=r.getLayer(t)).groups&&(s=o.groups.slice(0),-1===ye(n,o.groups)&&s.push(n)),r.setLayer(o,{groups:s});return i},e.fn.removeLayerFromGroup=function(t,n){var r,a,o,i,s=this,l=[];for(a=0;a<s.length;a+=1)r=e(s[a]),(o=r.getLayer(t)).groups&&-1!==(i=ye(n,o.groups))&&((l=o.groups.slice(0)).splice(i,1),r.setLayer(o,{groups:l}));return s},Oe.cursors=["grab","grabbing","zoom-in","zoom-out"],Oe.prefix=function(){var e=de(le.documentElement,"");return"-"+(Te.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1]+"-"}(),e.fn.triggerLayerEvent=function(t,n){var r,a,o,i=this;for(a=0;a<i.length;a+=1)r=e(i[a]),o=p(i[a]),(t=r.getLayer(t))&&R(r,o,t,n);return i},e.fn.drawLayer=function(t){var n,r,a,o,s=this;for(n=0;n<s.length;n+=1)a=e(s[n]),(r=i(s[n]))&&(o=a.getLayer(t),k(a,r,o));return s},e.fn.drawLayers=function(t){var n,r,a,o,s,u,c,d,h,f,g,v,y,m=this,w=t||{};for((d=w.index)||(d=0),r=0;r<m.length;r+=1)if(n=e(m[r]),a=i(m[r])){for(f=p(m[r]),!1!==w.clear&&n.clearCanvas(),o=f.layers,c=d;c<o.length;c+=1)if(s=o[c],s.index=c,w.resetFire&&(s._fired=!1),k(n,a,s,c+1),s._masks=f.transforms.masks.slice(0),s._method===e.fn.drawImage&&s.visible){y=!0;break}if(y)break;h=c,s=C(f),v=(g=f.event).type,f.drag.layer&&L(n,f,v),null===(u=f.lastIntersected)||s===u||!u._hovered||u._fired||f.drag.dragging||(f.lastIntersected=null,u._fired=!0,u._hovered=!1,R(n,f,u,"mouseout"),S(n,f)),s&&(s[v]||(v=W(v)),s._event&&s.intersects&&(f.lastIntersected=s,(s.mouseover||s.mouseout||s.cursors)&&!f.drag.dragging&&(s._hovered||s._fired||(s._fired=!0,s._hovered=!0,R(n,f,s,"mouseover"))),s._fired||(s._fired=!0,g.type=null,R(n,f,s,v)),!s.draggable||s.disableEvents||"mousedown"!==v&&"touchstart"!==v||(f.drag.layer=s))),null!==s||f.drag.dragging||S(n,f),h===o.length&&(f.intersecting.length=0,f.transforms=l(Re),f.savedTransforms.length=0)}return m},e.fn.addLayer=function(e){var t,r,a=this;for(t=0;t<a.length;t+=1)i(a[t])&&(r=new n(e),r.layer=!0,O(a[t],r,e));return a},Oe.props=["width","height","opacity","lineHeight"],Oe.propsObj={},e.fn.animateLayer=function(){var t,n,r,a,o,s=this,l=Te.call(arguments,0);for("object"===pe(l[2])?(l.splice(2,0,l[2].duration||null),l.splice(3,0,l[3].easing||null),l.splice(4,0,l[4].complete||null),l.splice(5,0,l[5].step||null)):(void 0===l[2]?(l.splice(2,0,null),l.splice(3,0,null),l.splice(4,0,null)):me(l[2])&&(l.splice(2,0,null),l.splice(3,0,null)),void 0===l[3]?(l[3]=null,l.splice(4,0,null)):me(l[3])&&l.splice(3,0,null)),n=0;n<s.length;n+=1)t=e(s[n]),i(s[n])&&(r=p(s[n]),(a=t.getLayer(l[0]))&&a._method!==e.fn.draw&&(o=ve({},l[1]),o=Y(s[n],a,o),A(o,!0),A(a),a.style=Oe.propsObj,e(a).animate(o,{duration:l[2],easing:e.easing[l[3]]?l[3]:null,complete:function(e,t,n){return function(){X(n),D(n),t.animating&&t.animated!==n||e.drawLayers(),n._animating=!1,t.animating=!1,t.animated=null,l[4]&&l[4].call(e[0],n),R(e,t,n,"animateend")}}(t,r,a),step:function(e,t,n){return function(r,a){var o,i,s,u=!1;"_"===a.prop[0]&&(u=!0,a.prop=a.prop.replace("_",""),n[a.prop]=n["_"+a.prop]),-1!==a.prop.indexOf(".")&&(o=a.prop.split("."),i=o[0],s=o[1],n[i]&&(n[i][s]=a.now)),n._pos!==a.pos&&(n._pos=a.pos,n._animating||t.animating||(n._animating=!0,t.animating=!0,t.animated=n),t.animating&&t.animated!==n||e.drawLayers()),l[5]&&l[5].call(e[0],r,a,n),R(e,t,n,"animate",a),u&&(a.prop="_"+a.prop)}}(t,r,a)}),R(t,r,a,"animatestart")));return s},e.fn.animateLayerGroup=function(t){var n,r,a,o,i=this,s=Te.call(arguments,0);for(r=0;r<i.length;r+=1)if(n=e(i[r]),a=n.getLayerGroup(t))for(o=0;o<a.length;o+=1)s[0]=a[o],n.animateLayer.apply(n,s);return i},e.fn.delayLayer=function(t,n){var r,a,o,i,s=this;for(n=n||0,a=0;a<s.length;a+=1)r=e(s[a]),o=p(s[a]),(i=r.getLayer(t))&&(e(i).delay(n),R(r,o,i,"delay"));return s},e.fn.delayLayerGroup=function(t,n){var r,a,o,i,s,l=this;for(n=n||0,a=0;a<l.length;a+=1)if(r=e(l[a]),o=r.getLayerGroup(t))for(s=0;s<o.length;s+=1)i=o[s],r.delayLayer(i,n);return l},e.fn.stopLayer=function(t,n){var r,a,o,i,s=this;for(a=0;a<s.length;a+=1)r=e(s[a]),o=p(s[a]),(i=r.getLayer(t))&&(e(i).stop(n),R(r,o,i,"stop"));return s},e.fn.stopLayerGroup=function(t,n){var r,a,o,i,s,l=this;for(a=0;a<l.length;a+=1)if(r=e(l[a]),o=r.getLayerGroup(t))for(s=0;s<o.length;s+=1)i=o[s],r.stopLayer(i,n);return l},function(t){var n;for(n=0;n<t.length;n+=1)e.fx.step[t[n]]=E}(["color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fillStyle","outlineColor","strokeStyle","shadowColor"]),Pe.touchEvents={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},Pe.mouseEvents={touchstart:"mousedown",touchend:"mouseup",touchmove:"mousemove"},function(e){var t;for(t=0;t<e.length;t+=1)H(e[t])}(["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","touchstart","touchmove","touchend","contextmenu"]),e.event.fix=function(t){var n,r,a;if(t=Se.call(e.event,t),r=t.originalEvent)if(a=r.changedTouches,void 0!==t.pageX&&void 0===t.offsetX){n=e(t.currentTarget).offset();try{n&&(t.offsetX=t.pageX-n.left,t.offsetY=t.pageY-n.top)}catch(e){}}else if(a)try{(n=e(t.currentTarget).offset())&&(t.offsetX=a[0].pageX-n.left,t.offsetY=a[0].pageY-n.top)}catch(e){}return t},Pe.drawings={arc:"drawArc",bezier:"drawBezier",ellipse:"drawEllipse",function:"draw",image:"drawImage",line:"drawLine",path:"drawPath",polygon:"drawPolygon",slice:"drawSlice",quadratic:"drawQuadratic",rectangle:"drawRect",text:"drawText",vector:"drawVector",save:"saveCanvas",restore:"restoreCanvas",rotate:"rotateCanvas",scale:"scaleCanvas",translate:"translateCanvas"},e.fn.draw=function e(t){var r,a,o=this,s=new n(t);if(Pe.drawings[s.type]&&"function"!==s.type)o[Pe.drawings[s.type]](t);else for(r=0;r<o.length;r+=1)(a=i(o[r]))&&(s=new n(t),O(o[r],s,t,e),s.visible&&s.fn&&s.fn.call(o[r],a,s));return o},e.fn.clearCanvas=function e(t){var r,a,o=this,s=new n(t);for(r=0;r<o.length;r+=1)(a=i(o[r]))&&(null===s.width||null===s.height?(a.save(),a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,o[r].width,o[r].height),a.restore()):(O(o[r],s,t,e),y(o[r],a,s,s.width,s.height),a.clearRect(s.x-s.width/2,s.y-s.height/2,s.width,s.height),g(a,s)));return o},e.fn.saveCanvas=function e(t){var r,a,o,s,l,c=this;for(r=0;r<c.length;r+=1)if(a=i(c[r]))for(s=p(c[r]),o=new n(t),O(c[r],o,t,e),l=0;l<o.count;l+=1)u(a,s);return c},e.fn.restoreCanvas=function e(t){var r,a,o,s,l,u=this;for(r=0;r<u.length;r+=1)if(a=i(u[r]))for(s=p(u[r]),o=new n(t),O(u[r],o,t,e),l=0;l<o.count;l+=1)c(a,s);return u},e.fn.rotateCanvas=function e(t){var r,a,o,s,l=this;for(r=0;r<l.length;r+=1)(a=i(l[r]))&&(s=p(l[r]),o=new n(t),O(l[r],o,t,e),o.autosave&&u(a,s),G(a,o,s.transforms));return l},e.fn.scaleCanvas=function e(t){var r,a,o,s,l=this;for(r=0;r<l.length;r+=1)(a=i(l[r]))&&(s=p(l[r]),o=new n(t),O(l[r],o,t,e),o.autosave&&u(a,s),B(a,o,s.transforms));return l},e.fn.translateCanvas=function e(t){var r,a,o,s,l=this;for(r=0;r<l.length;r+=1)(a=i(l[r]))&&(s=p(l[r]),o=new n(t),O(l[r],o,t,e),o.autosave&&u(a,s),N(a,o,s.transforms));return l},e.fn.drawRect=function e(t){var r,a,o,s,l,u,c,d,f,g=this;for(r=0;r<g.length;r+=1)(a=i(g[r]))&&(o=new n(t),O(g[r],o,t,e),o.visible&&(y(g[r],a,o,o.width,o.height),h(g[r],a,o),a.beginPath(),o.width&&o.height&&(s=o.x-o.width/2,l=o.y-o.height/2,d=be(o.cornerRadius),d?(u=o.x+o.width/2,c=o.y+o.height/2,o.width<0&&(f=s,s=u,u=f),o.height<0&&(f=l,l=c,c=f),u-s-2*d<0&&(d=(u-s)/2),c-l-2*d<0&&(d=(c-l)/2),a.moveTo(s+d,l),a.lineTo(u-d,l),a.arc(u-d,l+d,d,3*xe/2,2*xe,!1),a.lineTo(u,c-d),a.arc(u-d,c-d,d,0,xe/2,!1),a.lineTo(s+d,c),a.arc(s+d,c-d,d,xe/2,xe,!1),a.lineTo(s,l+d),a.arc(s+d,l+d,d,xe,3*xe/2,!1),o.closed=!0):a.rect(s,l,o.width,o.height)),I(g[r],a,o),v(g[r],a,o)));return g},e.fn.drawArc=function e(t){var r,a,o,s=this;for(r=0;r<s.length;r+=1)(a=i(s[r]))&&(o=new n(t),O(s[r],o,t,e),o.visible&&(y(s[r],a,o,2*o.radius),h(s[r],a,o),a.beginPath(),U(s[r],a,o,o),I(s[r],a,o),v(s[r],a,o)));return s},e.fn.drawEllipse=function e(t){var r,a,o,s,l,u=this;for(r=0;r<u.length;r+=1)(a=i(u[r]))&&(o=new n(t),O(u[r],o,t,e),o.visible&&(y(u[r],a,o,o.width,o.height),h(u[r],a,o),s=o.width*(4/3),l=o.height,a.beginPath(),a.moveTo(o.x,o.y-l/2),a.bezierCurveTo(o.x-s/2,o.y-l/2,o.x-s/2,o.y+l/2,o.x,o.y+l/2),a.bezierCurveTo(o.x+s/2,o.y+l/2,o.x+s/2,o.y-l/2,o.x,o.y-l/2),I(u[r],a,o),o.closed=!0,v(u[r],a,o)));return u},e.fn.drawPolygon=function e(t){var r,a,o,s,l,u,c,d,f,g,p=this;for(r=0;r<p.length;r+=1)if((a=i(p[r]))&&(o=new n(t),O(p[r],o,t,e),o.visible)){for(y(p[r],a,o,2*o.radius),h(p[r],a,o),s=(u=(l=2*xe/o.sides)/2)+xe/2,c=o.radius*ke(u),a.beginPath(),g=0;g<o.sides;g+=1)d=o.x+o.radius*ke(s),f=o.y+o.radius*Ce(s),a.lineTo(d,f),o.concavity&&(d=o.x+(c+-c*o.concavity)*ke(s+u),f=o.y+(c+-c*o.concavity)*Ce(s+u),a.lineTo(d,f)),s+=l;I(p[r],a,o),o.closed=!0,v(p[r],a,o)}return p},e.fn.drawSlice=function e(t){var r,a,o,s,l,u,c=this;for(r=0;r<c.length;r+=1)(a=i(c[r]))&&(o=new n(t),O(c[r],o,t,e),o.visible&&(y(c[r],a,o,2*o.radius),h(c[r],a,o),o.start*=o._toRad,o.end*=o._toRad,o.start-=xe/2,o.end-=xe/2,o.start=q(o.start),o.end=q(o.end),o.end<o.start&&(o.end+=2*xe),s=(o.start+o.end)/2,l=o.radius*o.spread*ke(s),u=o.radius*o.spread*Ce(s),o.x+=l,o.y+=u,a.beginPath(),a.arc(o.x,o.y,o.radius,o.start,o.end,o.ccw),a.lineTo(o.x,o.y),I(c[r],a,o),o.closed=!0,v(c[r],a,o)));return c},e.fn.drawLine=function e(t){var r,a,o,s=this;for(r=0;r<s.length;r+=1)(a=i(s[r]))&&(o=new n(t),O(s[r],o,t,e),o.visible&&(y(s[r],a,o),h(s[r],a,o),a.beginPath(),K(s[r],a,o,o),I(s[r],a,o),v(s[r],a,o)));return s},e.fn.drawQuadratic=function e(t){var r,a,o,s=this;for(r=0;r<s.length;r+=1)(a=i(s[r]))&&(o=new n(t),O(s[r],o,t,e),o.visible&&(y(s[r],a,o),h(s[r],a,o),a.beginPath(),Z(s[r],a,o,o),I(s[r],a,o),v(s[r],a,o)));return s},e.fn.drawBezier=function e(t){var r,a,o,s=this;for(r=0;r<s.length;r+=1)(a=i(s[r]))&&(o=new n(t),O(s[r],o,t,e),o.visible&&(y(s[r],a,o),h(s[r],a,o),a.beginPath(),ee(s[r],a,o,o),I(s[r],a,o),v(s[r],a,o)));return s},e.fn.drawVector=function e(t){var r,a,o,s=this;for(r=0;r<s.length;r+=1)(a=i(s[r]))&&(o=new n(t),O(s[r],o,t,e),o.visible&&(y(s[r],a,o),h(s[r],a,o),a.beginPath(),re(s[r],a,o,o),I(s[r],a,o),v(s[r],a,o)));return s},e.fn.drawPath=function e(t){var r,a,o,s,l,u=this;for(r=0;r<u.length;r+=1)if((a=i(u[r]))&&(o=new n(t),O(u[r],o,t,e),o.visible)){for(y(u[r],a,o),h(u[r],a,o),a.beginPath(),s=1;void 0!==(l=o["p"+s]);)"line"===(l=new n(l)).type?K(u[r],a,o,l):"quadratic"===l.type?Z(u[r],a,o,l):"bezier"===l.type?ee(u[r],a,o,l):"vector"===l.type?re(u[r],a,o,l):"arc"===l.type&&U(u[r],a,o,l),s+=1;I(u[r],a,o),v(u[r],a,o)}return u},e.fn.drawText=function e(t){var r,a,o,s,l,u,c,d,f,v,p,m,w,x=this;for(r=0;r<x.length;r+=1)if((a=i(x[r]))&&(o=new n(t),O(x[r],o,t,e),o.visible)){if(a.textBaseline=o.baseline,a.textAlign=o.align,ae(x[r],a,o),s=null!==o.maxWidth?ie(a,o):o.text.toString().split("\n"),oe(x[r],a,o,s),y(x[r],a,o,o.width,o.height),h(x[r],a,o),m=o.x,"left"===o.align?o.respectAlign?o.x+=o.width/2:m-=o.width/2:"right"===o.align&&(o.respectAlign?o.x-=o.width/2:m+=o.width/2),o.radius)for(c=ge(o.fontSize),null===o.letterSpacing&&(o.letterSpacing=c/500),u=0;u<s.length;u+=1){for(a.save(),a.translate(o.x,o.y),l=s[u],o.flipArcText&&((f=l.split("")).reverse(),l=f.join("")),d=l.length,a.rotate(-xe*o.letterSpacing*(d-1)/2),p=0;p<d;p+=1)v=l[p],0!==p&&a.rotate(xe*o.letterSpacing),a.save(),a.translate(0,-o.radius),o.flipArcText&&a.scale(-1,-1),a.fillText(v,0,0),"transparent"!==o.fillStyle&&(a.shadowColor="transparent"),0!==o.strokeWidth&&a.strokeText(v,0,0),a.restore();o.radius-=c,o.letterSpacing+=c/(1e3*xe),a.restore()}else for(u=0;u<s.length;u+=1)l=s[u],w=(o.y+u*o.height/s.length-(s.length-1)*o.height/s.length)/2,a.shadowColor=o.shadowColor,a.fillText(l,m,w),"transparent"!==o.fillStyle&&(a.shadowColor="transparent"),0!==o.strokeWidth&&a.strokeText(l,m,w);w=0,"top"===o.baseline?w+=o.height/2:"bottom"===o.baseline&&(w-=o.height/2),o._event&&(a.beginPath(),a.rect(o.x-o.width/2,o.y-o.height/2+w,o.width,o.height),I(x[r],a,o),a.closePath()),g(a,o)}return je.propCache=o,x},e.fn.measureText=function(e){var t,r,a,o=this;return(!(r=o.getLayer(e))||r&&!r._layer)&&(r=new n(e)),(t=i(o[0]))&&(ae(o[0],t,r),a=ie(t,r),oe(o[0],t,r,a)),r},e.fn.drawImage=function t(r){function a(e,t,n,r,a){null===r.width&&null===r.sWidth&&(r.width=r.sWidth=m.width),null===r.height&&null===r.sHeight&&(r.height=r.sHeight=m.height),a&&(a.width=r.width,a.height=r.height),null!==r.sWidth&&null!==r.sHeight&&null!==r.sx&&null!==r.sy?(null===r.width&&(r.width=r.sWidth),null===r.height&&(r.height=r.sHeight),r.cropFromCenter&&(r.sx+=r.sWidth/2,r.sy+=r.sHeight/2),r.sy-r.sHeight/2<0&&(r.sy=r.sHeight/2),r.sy+r.sHeight/2>m.height&&(r.sy=m.height-r.sHeight/2),r.sx-r.sWidth/2<0&&(r.sx=r.sWidth/2),r.sx+r.sWidth/2>m.width&&(r.sx=m.width-r.sWidth/2),y(e,t,r,r.width,r.height),h(e,t,r),t.drawImage(m,r.sx-r.sWidth/2,r.sy-r.sHeight/2,r.sWidth,r.sHeight,r.x-r.width/2,r.y-r.height/2,r.width,r.height)):(y(e,t,r,r.width,r.height),h(e,t,r),t.drawImage(m,r.x-r.width/2,r.y-r.height/2,r.width,r.height)),t.beginPath(),t.rect(r.x-r.width/2,r.y-r.height/2,r.width,r.height),I(e,t,r),t.closePath(),g(t,r),f(t,n,r)}function o(t,n,r,o,i){return function(){var s=e(t);a(t,n,r,o,i),o.layer?R(s,r,i,"load"):o.load&&o.load.call(s[0],i),o.layer&&(i._masks=r.transforms.masks.slice(0),o._next&&s.drawLayers({clear:!1,resetFire:!0,index:o._next}))}}var s,l,u,c,d,v,m,w,x,_=this,b=je.imageCache;for(l=0;l<_.length;l+=1)s=_[l],(u=i(_[l]))&&(c=p(_[l]),d=new n(r),v=O(_[l],d,r,t),d.visible&&(x=d.source,w=x.getContext,x.src||w?m=x:x&&(b[x]&&b[x].complete?m=b[x]:(m=new ue,x.match(/^data:/i)||(m.crossOrigin=d.crossOrigin),m.src=x,b[x]=m)),m&&(m.complete||w?o(s,u,c,d,v)():(m.onload=o(s,u,c,d,v),m.src=m.src))));return _},e.fn.createPattern=function(t){function r(){u=a.createPattern(s,o.repeat),o.load&&o.load.call(d[0],u)}var a,o,s,l,u,c,d=this;return a=i(d[0]),a?(o=new n(t),c=o.source,me(c)?(s=e("<canvas />")[0],s.width=o.width,s.height=o.height,l=i(s),c.call(s,l),r()):(l=c.getContext,c.src||l?s=c:(s=new ue,c.match(/^data:/i)||(s.crossOrigin=o.crossOrigin),s.src=c),s.complete||l?r():(s.onload=r,s.src=s.src))):u=null,u},e.fn.createGradient=function(e){var t,r,a,o,s,l,u,c,d,h,f=this,g=[];if(r=new n(e),t=i(f[0])){for(r.x1=r.x1||0,r.y1=r.y1||0,r.x2=r.x2||0,r.y2=r.y2||0,a=null!==r.r1&&null!==r.r2?t.createRadialGradient(r.x1,r.y1,r.r1,r.x2,r.y2,r.r2):t.createLinearGradient(r.x1,r.y1,r.x2,r.y2),u=1;void 0!==r["c"+u];u+=1)void 0!==r["s"+u]?g.push(r["s"+u]):g.push(null);for(o=g.length,null===g[0]&&(g[0]=0),null===g[o-1]&&(g[o-1]=1),u=0;u<o;u+=1){if(null!==g[u]){for(d=1,h=0,s=g[u],c=u+1;c<o;c+=1){if(null!==g[c]){l=g[c];break}d+=1}s>l&&(g[c]=g[u])}else null===g[u]&&(h+=1,g[u]=s+h*((l-s)/d));a.addColorStop(g[u],r["c"+(u+1)])}}else a=null;return a},e.fn.setPixels=function e(t){var r,a,o,s,l,u,c,d,h,f=this;for(a=0;a<f.length;a+=1)if(r=f[a],(o=i(r))&&(s=new n(t),O(r,s,t,e),y(f[a],o,s,s.width,s.height),null!==s.width&&null!==s.height||(s.width=r.width,s.height=r.height,s.x=s.width/2,s.y=s.height/2),0!==s.width&&0!==s.height)){if(u=o.getImageData(s.x-s.width/2,s.y-s.height/2,s.width,s.height),c=u.data,h=c.length,s.each)for(d=0;d<h;d+=4)l={r:c[d],g:c[d+1],b:c[d+2],a:c[d+3]},s.each.call(r,l,s),c[d]=l.r,c[d+1]=l.g,c[d+2]=l.b,c[d+3]=l.a;o.putImageData(u,s.x-s.width/2,s.y-s.height/2),o.restore()}return f},e.fn.getCanvasImage=function(e,t){var n,r=this,a=null;return 0!==r.length&&(n=r[0]).toDataURL&&(void 0===t&&(t=1),a=n.toDataURL("image/"+e,t)),a},e.fn.detectPixelRatio=function(e){var n,r,a,o,s,l,u,c,d,h=this;for(r=0;r<h.length;r+=1)n=h[r],a=i(n),(d=p(h[r])).scaled||(o=t.devicePixelRatio||1,s=a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1,1!==(l=o/s)&&(u=n.width,c=n.height,n.width=u*l,n.height=c*l,n.style.width=u+"px",n.style.height=c+"px",a.scale(l,l)),d.pixelRatio=l,d.scaled=!0,e&&e.call(n,l));return h},Ae.clearCache=function(){var e;for(e in je)Object.prototype.hasOwnProperty.call(je,e)&&(je[e]={})},e.support.canvas=void 0!==e("<canvas />")[0].getContext,ve(Ae,{defaults:se,setGlobalProps:h,transformShape:y,detectEvents:I,closePath:v,setCanvasFont:ae,measureText:oe}),e.jCanvas=Ae,e.jCanvasObject=n}),function(e,t){"use strict";function n(e,n,o,i,s,l){var u=i-e,c=s-n,d=a(r(u,2)+r(c,2)),h=(r(d,2)+r(o,2)-r(l,2))/(2*d),f=e+u*h/d,g=n+c*h/d,v=a(r(o,2)-r(h,2)),y=f+v/d*-c,p=g+u*(v/d);return!(d>o+l||d<t.abs(o-l))&&[y,p]}var r=t.pow,a=t.sqrt,o=t.PI;e.jCanvas.extend({name:"drawCrescent",type:"crescent",props:{eclipse:.5},fn:function(r,a){var i,s,l=2*a.radius*(1-a.eclipse),u=n(a.x,a.y,a.radius,a.x+l,a.y,a.radius),c=u[0]-a.x,d=u[1]-a.y,h=t.atan2(d,c);a.eclipse<=0?(i=0,s=2*o):(i=h,s=-h),a.eclipse<1&&(e.jCanvas.transformShape(this,r,a),r.beginPath(),r.arc(a.x,a.y,a.radius,i,s,!1),a.eclipse>0&&r.arc(a.x+l,a.y,a.radius,o+i,o+s,!0),e.jCanvas.detectEvents(this,r,a),a.closed=!0,e.jCanvas.closePath(this,r,a))}})}(jQuery,Math);